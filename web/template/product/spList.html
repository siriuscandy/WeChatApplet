<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
<title>服装类</title>
<link rel="stylesheet" href="css/mui.min.css">
<link rel="stylesheet" href="css/style.css">
</head>

<body>
	<div class="content bgfff">
        <!--商品分类-->
		<div class="aui-week t-line">
            <h2><span>商品分类</span></h2>
            <ul class="mui-table-view mui-grid-view" data-bind="foreach: data.list()">
                <li class="mui-table-view-cell mui-media mui-col-xs-3a"  data-bind="attr:{'data-id':cateId}">
                    <a data-bind="click:function(){$parent.goList(cateId,name)}" >
                        <img class="mui-media-object" data-bind="attr:{'src':images}">
                        <div class="mui-media-body" data-bind="text:name"></div>
                    </a>
                </li>

             </ul>
        </div>
        <div style="height:50px"></div>
        <nav class="mui-bar mui-bar-tab">
            <div class="t-line">
                <a data-bind="click:function(){goIndex()}" class="aui-tab-item">
                    <span class="mui-icon iconHover mui-icon-home"></span>
                    <span class="mui-tab-label">首页</span>
                </a>
                <a data-bind="click:function(){goProList()}" class="aui-tab-item mui-active" >
                    <span class="mui-icon mui-icon-extra mui-icon-extra-class"></span>
                    <span class="mui-tab-label">购物</span>
                </a>
                <a data-bind="click:function(){goME()}" class="aui-tab-item" >
                    <span class="mui-icon mui-icon-extra mui-icon-extra-people"></span>
                    <span class="mui-tab-label">我的</span>
                </a>
            </div>
        </nav>
    </div>
<script>
    window.$ctx = "http://rapapi.org/mockjsdata/22525";
</script>
<script src="/web/trd/requirejs/require.js"></script>
<script src="/web/js/require.config.js"></script>
<script type="text/javascript" charset="utf-8">
    require([ 'jquery', 'knockout','dialogmin','ajaxCom','swiper'
    ], function($, ko,dialogmin,ajaxCom) {
        var listUrl  =  '/goodsAPI/goodsClassList';
        var viewModel = {
            data : {
                list : ko.observableArray([]),
                attrs:ko.observable({}),
                firstClass:ko.observable(""),
                secondClass:ko.observable(""),
            },

        };
        viewModel.goIndex = function(){
            window.location.href = "../tmp"+GetQueryString("tmp")+"/index.html";
        };
        viewModel.goProList = function(){
            window.location.href = "spList.html?tmp="+GetQueryString("tmp");
        };
        viewModel.goME = function(){
            window.location.href = "me.html?tmp="+GetQueryString("tmp");
        };
        viewModel.goList = function(id,name){
            window.location.href = "flList.html?tmp="+GetQueryString("tmp")+"&cateId=" + id+"&catename="+name;;
        };
        viewModel.getbanner = function(){
            var queryData = {

                userModuleId:viewModel.userModuleId
            };
            ajaxCom.Loadajax('GET',listUrl,queryData,function(res){
                viewModel.data.list(res.list);
                var swiper = new Swiper('#swiper-container', {
                    autoplay:3000,
                    pagination: '.pagination1',
                    paginationClickable: true,
                    mode: 'vertical'
                });
            },function(error){

                dialogmin("网络错误");
            })
        };

        viewModel.load=function(){
            viewModel.getbanner();
        }

        viewModel.load();
        ko.applyBindings(viewModel);
        function GetQueryString(name)
        {
            var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
            var r = window.location.search.substr(1).match(reg);
            if(r!=null)return  unescape(r[2]); return null;
        };

    })
</script>

</body>
</html>
